<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>William Chan | Structural Engineering Portfolio</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0b1220; --text:#e5e7eb; --muted:#9aa7bd; --card:#0f172a; --border:#22324b;
    --accent:#38bdf8; --accent2:#22d3ee; --max:1120px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0; font-family:'Inter',system-ui,Segoe UI,Roboto,Arial,sans-serif; color:var(--text); background:var(--bg)}

  /* 背景（自动尝试 3DView.jpg / 3DView.png） */
  .bg{position:fixed; inset:0; z-index:-2; background:#091223 center/cover no-repeat}
  .scrim{position:fixed; inset:0; z-index:-1;
         background:linear-gradient(180deg, rgba(8,14,24,.62) 0%, rgba(8,14,24,.78) 55%, rgba(8,14,24,.90) 100%)}

  .wrap{max-width:var(--max); margin:0 auto; padding:28px 18px 84px}

  header{
    display:flex; gap:16px; align-items:center; justify-content:space-between; flex-wrap:wrap;
    padding:16px 18px; border:1px solid var(--border); border-radius:16px;
    background:rgba(10,16,28,.68); backdrop-filter:blur(6px)
  }
  .name{font-weight:800; font-size:28px}
  .role{color:var(--muted); font-size:14px}
  .contacts{display:flex; gap:14px; flex-wrap:wrap; font-size:14px}
  .contacts a{color:var(--text); text-decoration:none}
  .contacts a:hover{color:#bfe9ff}

  .hero{margin:18px 0 16px; padding:18px; border:1px solid var(--border); border-radius:16px;
        background:rgba(10,16,28,.72); backdrop-filter:blur(4px)}
  .hero h1{margin:0 0 6px; font-size:24px}
  .hero p{margin:0; color:var(--muted)}

  .grid{display:grid; gap:16px; grid-template-columns:1fr; margin-top:16px}
  @media (min-width:900px){ .grid{ grid-template-columns:1.25fr .75fr } } /* 左侧更大 */

  .card{border:1px solid var(--border); border-radius:16px; background:rgba(12,18,30,.86);
        overflow:hidden; box-shadow:0 8px 24px rgba(0,0,0,.25)}
  .card h2{margin:0; padding:16px 16px 8px; font-size:18px}
  .card .body{padding:0 16px 16px}
  .muted{color:var(--muted); font-size:14px}

  /* 视频更大：桌面端 ~56vh，高度自适应；移动端稍降 */
  .video-wrap{border:1px solid var(--border); border-radius:12px; overflow:hidden; background:black}
  video{width:100%; height:56vh; object-fit:cover}
  @media (max-width:899px){ video{height:38vh} }

  iframe{width:100%; height:520px; border:1px solid var(--border); border-radius:12px; background:#111}
  .actions{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px}
  .cta{background:linear-gradient(135deg, var(--accent), var(--accent2)); color:#03121a; font-weight:700;
       padding:9px 12px; border-radius:12px; text-decoration:none}
  .ghost{border:1px solid #2a3b55; padding:9px 12px; border-radius:12px; text-decoration:none; color:var(--text)}

  footer{margin-top:26px; color:var(--muted); font-size:13px; text-align:center}

  /* 音乐单键切换（右下角） */
  .music-toggle{
    position:fixed; right:18px; bottom:18px; z-index:10; width:56px; height:56px; border-radius:50%;
    border:1px solid var(--border); cursor:pointer; display:flex; align-items:center; justify-content:center;
    background:linear-gradient(135deg, rgba(56,189,248,.28), rgba(34,211,238,.18)); color:var(--text);
    box-shadow:0 10px 26px rgba(0,0,0,.35); user-select:none
  }
  .music-toggle span{font-size:20px}
  .music-toggle:hover{border-color:#3a4a66}
  .pulse{box-shadow:0 0 0 0 rgba(56,189,248,.45); animation:pulse 1.6s infinite}
  @keyframes pulse{0%{box-shadow:0 0 0 0 rgba(56,189,248,.45)}70%{box-shadow:0 0 0 20px rgba(56,189,248,0)}100%{box-shadow:0 0 0 0 rgba(56,189,248,0)}}
</style>
</head>
<body>
  <div class="bg" id="bg"></div>
  <div class="scrim"></div>

  <div class="wrap">
    <header>
      <div>
        <div class="name">William Chan (Jinyu Chen)</div>
        <div class="role">MEng (Structural) • BIM / Revit / Structural Design</div>
      </div>

      <!-- 右上角联系方式：文字样式 + 可点击链接 -->
      <div class="contacts">
        <div>Email: <a href="mailto:jy20000930@gmail.com">jy20000930@gmail.com</a></div>
        <div>Phone: <a href="tel:+61469069896">+61 469 069 896</a></div>
        <div>LinkedIn: <a href="https://www.linkedin.com/in/william-chan-65aba2281" target="_blank" rel="noopener">/in/william-chan-65aba2281</a></div>
      </div>
    </header>

    <section class="hero">
      <h1>Portfolio Highlights</h1>
      <p>Drafting set, 4D simulation and structural works. Background image from my 3D model.</p>
    </section>

    <section class="grid">
      <!-- 左：视频（更大 + 自动播放） -->
      <article class="card">
        <h2>4D Simulation (Revit / Navisworks)</h2>
        <div class="body">
          <p class="muted">Short demo showcasing sequencing and visualization.</p>
          <div class="video-wrap">
            <video
              autoplay
              muted
              playsinline
              loop
              controls
              preload="metadata">
              <source src="%28With%20music%29WilliamChan%28JinyuChen%29-4Dsimulation%20Portfolio.mp4" type="video/mp4" />

              Your browser does not support the video tag.
            </video>
          </div>
          <div class="actions">
            <a class="ghost" href="WilliamChan(JinyuChen)-4Dsimulation%20Portfolio.mp4" download>Download MP4</a>
          </div>
        </div>
      </article>

      <!-- 右：PDF -->
      <article class="card">
        <h2>Drafting Portfolio (PDF)</h2>
        <div class="body">
          <p class="muted">Detail drawings & documentation samples exported from Revit.</p>
          <iframe title="Drafting PDF"
                  src="William%20Chan(Jinyu%20Chen)-Drafting%20Portfolio.pdf#view=FitH"
                  loading="lazy"></iframe>
          <div class="actions">
            <a class="cta"   href="William%20Chan(Jinyu%20Chen)-Drafting%20Portfolio.pdf" target="_blank" rel="noopener">Open PDF</a>
            <a class="ghost" href="William%20Chan(Jinyu%20Chen)-Drafting%20Portfolio.pdf" download>Download PDF</a>
          </div>
        </div>
      </article>
    </section>

    <footer>© <span id="y"></span> William Chan. Built with GitHub Pages.</footer>
  </div>

  <!-- 背景音乐（保持原始文件名；URL 已编码） -->
  <audio id="bgm" src="Spring%20In%20My%20Step%20-%20Silent%20Partner.mp3" preload="auto"></audio>

  <!-- 单键音乐切换 -->
  <button class="music-toggle pulse" id="musicBtn" aria-label="Toggle music"><span>▶</span></button>

<script>
  // 年份
  document.getElementById('y').textContent = new Date().getFullYear();

  // 背景图加载（jpg -> png）
  (function(){
    const bg = document.getElementById('bg');
    const tryLoad = (arr) => {
      if(!arr.length) return;
      const src = arr.shift();
      const img = new Image();
      img.onload = ()=>{ bg.style.backgroundImage = `url('${src}')`; };
      img.onerror = ()=> tryLoad(arr);
      img.src = src + `?v=${Date.now()}`; // 防缓存
    };
    tryLoad(['3DView.jpg','3DView.png']);
  })();

  // 音乐：单键切换 + 自动播放尽力尝试
  const audio = document.getElementById('bgm');
  const btn   = document.getElementById('musicBtn');
  let playing = false;

  function refreshBtn(){
    btn.querySelector('span').textContent = playing ? '⏸' : '▶';
    btn.classList.toggle('pulse', !playing);
    btn.setAttribute('aria-pressed', playing ? 'true' : 'false');
  }

  async function playAttempt(){
    try{
      audio.loop = true;
      audio.volume = 0.3;
      await audio.play();
      playing = true; refreshBtn();
    }catch(e){
      playing = false; refreshBtn(); // 被浏览器拦截则等待用户交互
    }
  }

  // 首次尝试自动播放
  playAttempt();
  // 任意交互再试一次（提升成功率）
  ['pointerdown','keydown','touchstart','visibilitychange'].forEach(ev=>{
    window.addEventListener(ev, ()=>{ if(!playing) playAttempt(); }, { once:true, passive:true });
  });

  // 单键切换
  btn.addEventListener('click', async ()=>{
    if (playing){ audio.pause(); playing=false; refreshBtn(); }
    else { await playAttempt(); }
  });
</script>
</body>
</html>
